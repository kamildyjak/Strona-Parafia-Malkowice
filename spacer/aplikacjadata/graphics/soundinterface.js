/* krpanoJS 1.0.8.14 soundinterface plugin (build 2012-02-20) */
var krpanoplugin=function(){function s(){}function t(){var a=arguments;if(a.length>1){var b=String(a[0]).toLowerCase(),f=a[1],h=a.length>2?parseInt(a[2]):1,n=a.length>3?a[3]:null;a=e.isphone||e.ispad;if(b=="auto"||b=="null"||b=="")b="autoid_"+e.timertick+"_"+Math.ceil(e.random*1E3);f=unescape(e.parsePath(f));var c=null;if(a&&o)if(d[b]!==undefined){c=d[b];c.currentTime=0;c.pause();d[b]=null;delete d[b];c=null}if(c!=null||d[b]!==undefined){if(c==null)c=d[b];else d[b]=c;c.currentTime=0;c.pause()}else{c=
document.createElement("audio");if(!c){e.trace(2,p);return}c.addEventListener("error",function(){e.trace(3,"soundinterface - loading of "+f+" failed!")},true);c.addEventListener("ended",function(){if(c.loopcount>0){c.loopcount--;if(c.loopcount==0)n&&e.call(n);else{c.currentTime=0;c.play()}}else{c.currentTime=0;c.play()}},true);d[b]=c}try{c.loopcount=h;c.src=f;c.volume=i;c.play();if(a)if(c.paused){var j=document.body,k=function(){j.removeEventListener("touchstart",k,true);g&&g.paused&&!g.ended&&g.play()};
j.removeEventListener("touchstart",k,true);g=c;j.addEventListener("touchstart",k,true)}}catch(z){e.trace(2,p)}}}function u(a){(a=d[String(a).toLowerCase()])&&a.pause()}function v(a){(a=d[String(a).toLowerCase()])&&a.paused&&a.play()}function w(a){if(a=d[String(a).toLowerCase()])a.paused?a.play():a.pause()}function x(a){if(a=d[String(a).toLowerCase()]){a.currentTime=0;a.pause()}}function y(){var a,b;for(a in d)if((b=d[a])&&b.paused!==undefined){b.pause();d[a]=null;delete b}d=[];g=null}function q(a){var b,
f;for(b in d)if((f=d[b])&&f.paused!==undefined)if(a==false){if(f.paused==false){f.pause();f.needresume=true}}else f.needresume&&f.play()}function r(){i=l?0:m;var a,b;for(a in d)if(b=d[a])b.volume=i}var e=null,d=[],g=null,o=false,p="soundinterface - HTML5 audio is not supported by this browser!",m=1,l=false,i=1;this.registerplugin=function(a,b,f){e=a;f.keep=true;f.registerattribute("volume",1,function(h){m=h;r()},function(){return m});f.registerattribute("mute",false,function(h){l=String("yesontrue1").indexOf(String(h).toLowerCase())>=
0;r()},function(){return l});e.soundinterface=f;e.preloadsound=s;e.playsound=t;e.pausesound=u;e.resumesound=v;e.pausesoundtoggle=w;e.stopsound=x;e.stopallsounds=y;a=navigator.userAgent;b=a.indexOf("OS ");if(b>0){b+=3;if(a.slice(b,a.indexOf(" ",b)).split("_").join(".")<"4.2")o=true}window.addEventListener("pagehide",function(){q(false)},true);window.addEventListener("pageshow",function(){q(true)},true)}};
